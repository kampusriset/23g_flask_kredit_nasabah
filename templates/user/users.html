{% extends 'base.html' %}
{% block title %}Users{% endblock %}

{% block content %}

<!-- Page Header -->
<div class="d-flex justify-content-between align-items-center mb-4 flex-wrap gap-3" style="animation: fadeIn 1s ease-in-out;">
  <div>
    <h1 class="h3 fw-bold text-dark mb-0">
      <i class="bi bi-people-fill text-primary me-2"></i>
      Manajemen User
    </h1>
    <p class="text-muted small mb-0 mt-1">Kelola akses pengguna sistem</p>
  </div>
  <div>
    <a href="{{ url_for('user.tambah') }}" class="btn btn-primary">
      <i class="bi bi-plus-circle me-1"></i> Tambah User
    </a>
  </div>
</div>

<!-- Users Table -->
<div class="card shadow-sm" style="animation: fadeIn 1s ease-in-out 0.4s both;">
  <div class="card-header bg-white border-bottom py-3 d-flex align-items-center gap-2">
    <i class="bi bi-table text-primary"></i>
    <h5 class="mb-0 fs-6 fw-bold">Daftar User ({{ total }} data)</h5>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table table-hover align-middle mb-0">
        <thead class="bg-light">
          <tr>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">No</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Username</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Role</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted">Status</th>
            <th class="px-4 py-3 text-uppercase small fw-bold text-muted text-end">Aksi</th>
          </tr>
        </thead>
        <tbody>
          {% if users %}
            {% for u in users %}
            <tr>
              <td class="px-4 py-3 text-muted">{{ loop.index }}</td>
              <td class="px-4 py-3 fw-bold text-dark">{{ u.username }}</td>
              <td class="px-4 py-3">
                {% if u.role == 'admin' %}
                  <span class="badge bg-primary-subtle text-primary border border-primary-subtle">ADMIN</span>
                {% else %}
                  <span class="badge bg-secondary-subtle text-secondary border border-secondary-subtle">USER</span>
                {% endif %}
              </td>
              <td class="px-4 py-3">
                {% if u.is_active %}
                  <span class="badge bg-success-subtle text-success border border-success-subtle"><i class="bi bi-check-circle me-1"></i> AKTIF</span>
                {% else %}
                  <span class="badge bg-danger-subtle text-danger border border-danger-subtle"><i class="bi bi-x-circle me-1"></i> NONAKTIF</span>
                {% endif %}
              </td>
              <td class="px-4 py-3 text-end">
                <div class="d-flex justify-content-end gap-2">
                  <a href="{{ url_for('user.edit', id=u.id) }}" class="btn btn-sm btn-outline-success" title="Edit">
                    <i class="bi bi-pencil"></i>
                  </a>
                  <form method="POST" action="{{ url_for('user.hapus', id=u.id) }}" class="d-inline">
                    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                    <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('Yakin ingin hapus user ini?')" title="Hapus">
                      <i class="bi bi-trash"></i>
                    </button>
                  </form>
                </div>
              </td>
            </tr>
            {% endfor %}
          {% else %}
            <tr>
              <td colspan="5" class="text-center py-5">
                <div class="text-muted">
                  <i class="bi bi-inbox display-1 text-light-emphasis d-block mb-3"></i>
                  Data user tidak ditemukan
                </div>
              </td>
            </tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<style>
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}
.badge { font-weight: 500; letter-spacing: 0.5px; padding: 0.5em 0.8em; }
.btn-sm { padding: 0.4rem 0.6rem; }
</style>

{% endblock %}
